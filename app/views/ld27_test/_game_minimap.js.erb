var GameMinimap={
  SIZE:100,
  buffer:{
    canvas:null,
    ctx: null
  },
  init:function()
  {
    this.buffer.canvas = document.createElement('canvas');
    this.buffer.ctx = this.buffer.canvas.getContext('2d');
    this.buffer.canvas.width = this.SIZE;
    this.buffer.canvas.height = this.SIZE;
    this.buffer.canvas.fillStyle = '#000';
  },
  frame:function(ctx)
  {

    GameView.renderModeUI();
    ctx.translate(GameView.WINDOW_WIDTH-this.SIZE, GameView.WINDOW_HEIGHT-this.SIZE)

    this.renderOutline(ctx);
    //load objects.
    
    this.renderBroken(ctx);
    this.renderEnemies(ctx);
    this.renderBases(ctx);
    this.renderPlayer(ctx);
    this.renderPickups(ctx);
    //border outline
    ctx.strokeStyle='#ffffff';
    ctx.strokeRect(
      0,
      0,
      this.SIZE,
      this.SIZE
    )
  },
  renderOutline:function(ctx)
  {
    //border bg
    ctx.fillStyle='#000000';
    ctx.fillRect(
      0,
      0,
      this.SIZE,
      this.SIZE
    );
    //circle outlines
    for(var i=1;i<=4;i++)
    {
      ctx.strokeStyle="rgba(255,255,255,0.2)";
      ctx.beginPath();
      ctx.arc(
        this.SIZE/2, 
        this.SIZE/2, 
        i*12.5, 
        0, 
        Math.PI*2, 
        true
      ); 
      ctx.closePath();
      ctx.stroke();
    };
  },
  //https://github.com/bahamas10/tvstatic/
  renderBroken:function(ctx)
  {
  },
  renderPlayer:function(ctx)
  {
    if(this.withinBounds(GamePlayer.ship))
    {
      ctx.fillStyle="rgb("+GamePlayer.ship.color+")";
      ctx.fillRect(
        GamePlayer.ship.x/GameModel.minimap.ZOOM + 0.5 * this.SIZE -1,
        GamePlayer.ship.y/GameModel.minimap.ZOOM + 0.5 * this.SIZE -1,
        3,
        3
      );
    }
  },
  renderEnemies:function(ctx)
  {
    for(var i=0; i<GameEnemies.enemies.length;i++)
    {
      enemy = GameEnemies.enemies[i].ship;
      if(this.withinBounds(enemy))
      {
        ctx.fillStyle="rgb("+enemy.color+")";
        ctx.fillRect(
          enemy.x/GameModel.minimap.ZOOM + 0.5 * this.SIZE -1,
          enemy.y/GameModel.minimap.ZOOM + 0.5 * this.SIZE -1,
          3,
          3
        );
      }
    }
  },
  renderPickups:function(ctx)
  {
    for(var i=0; i<GamePickups.pickups.length;i++)
    {
      pickup = GamePickups.pickups[i];
      if(this.withinBounds(pickup))
      {
        ctx.fillStyle="rgb("+pickup.color+")";
        ctx.fillRect(
          pickup.x/GameModel.minimap.ZOOM + 0.5 * this.SIZE -1,
          pickup.y/GameModel.minimap.ZOOM + 0.5 * this.SIZE -1,
          3,
          3
        );
      }
    }
  },
  renderBases:function(ctx)
  {
  },
  withinBounds:function(obj)
  {
    return (
      obj.x < GameModel.minimap.MAX_X &&
      obj.x > GameModel.minimap.MIN_X &&
      obj.y < GameModel.minimap.MAX_Y &&
      obj.y > GameModel.minimap.MIN_Y 
    )
  },
  logic:function()
  {
  }

}